# CI/CD å·¥ä½œæµè¯´æ˜

æœ¬é¡¹ç›®ä½¿ç”¨ GitHub Actions è¿›è¡ŒæŒç»­é›†æˆå’ŒæŒç»­éƒ¨ç½²ã€‚

## å·¥ä½œæµæ–‡ä»¶

### 1. `ci.yml` - æŒç»­é›†æˆ

**è§¦å‘æ¡ä»¶ï¼š**
- æ¨é€åˆ° `main`ã€`master` æˆ– `develop` åˆ†æ”¯
- åˆ›å»º Pull Request åˆ°ä¸Šè¿°åˆ†æ”¯
- æ‰‹åŠ¨è§¦å‘ï¼ˆworkflow_dispatchï¼‰

**æ‰§è¡Œçš„ä»»åŠ¡ï¼š**
- âœ… **æµ‹è¯• (test)**: éªŒè¯ä»£ç åœ¨ Python 3.13 ä¸Šå¯ä»¥æ­£å¸¸è¿è¡Œ
  - æ£€æŸ¥ Python ç‰ˆæœ¬
  - éªŒè¯æ ¸å¿ƒæ¨¡å—å¯¼å…¥
  - è¿è¡Œè¯­æ³•æ£€æŸ¥
  
- âœ… **ä»£ç è´¨é‡æ£€æŸ¥ (lint)**: ä½¿ç”¨ ruff å’Œ black æ£€æŸ¥ä»£ç è´¨é‡
  - Ruff é™æ€åˆ†æ
  - Black ä»£ç æ ¼å¼æ£€æŸ¥
  
- âœ… **æ„å»ºéªŒè¯ (build)**: éªŒè¯é¡¹ç›®ç»“æ„å’Œä¾èµ–
  - éªŒè¯æ‰€æœ‰æ ¸å¿ƒæ¨¡å—å¯ä»¥æ­£ç¡®å¯¼å…¥
  - æ£€æŸ¥é¡¹ç›®ç»“æ„å®Œæ•´æ€§

### 2. `cd.yml` - æŒç»­éƒ¨ç½²

**è§¦å‘æ¡ä»¶ï¼š**
- æ¨é€åˆ° `main` æˆ– `master` åˆ†æ”¯
- åˆ›å»ºç‰ˆæœ¬æ ‡ç­¾ï¼ˆæ ¼å¼ï¼š`v*`ï¼Œå¦‚ `v1.0.0`ï¼‰
- æ‰‹åŠ¨è§¦å‘ï¼ˆworkflow_dispatchï¼‰

**æ‰§è¡Œçš„ä»»åŠ¡ï¼š**
- ğŸ“¦ **å‘å¸ƒ (release)**: å½“åˆ›å»ºç‰ˆæœ¬æ ‡ç­¾æ—¶è‡ªåŠ¨åˆ›å»º GitHub Release
  - ç”Ÿæˆå‘å¸ƒè¯´æ˜
  - åˆ›å»º GitHub Release

## ä½¿ç”¨æ–¹æ³•

### æœ¬åœ°æµ‹è¯• CI

1. ç¡®ä¿ä»£ç å¯ä»¥æ­£å¸¸è¿è¡Œï¼š
```bash
uv sync
python -c "from src import DocumentProcessor; print('OK')"
```

2. æäº¤å¹¶æ¨é€ä»£ç ï¼š
```bash
git add .
git commit -m "Your commit message"
git push
```

### åˆ›å»ºç‰ˆæœ¬å‘å¸ƒ

1. åˆ›å»ºç‰ˆæœ¬æ ‡ç­¾ï¼š
```bash
git tag -a v1.0.0 -m "Release version 1.0.0"
git push origin v1.0.0
```

2. GitHub Actions ä¼šè‡ªåŠ¨åˆ›å»º Release

### æ‰‹åŠ¨è§¦å‘å·¥ä½œæµ

1. å‰å¾€ GitHub ä»“åº“çš„ "Actions" æ ‡ç­¾é¡µ
2. é€‰æ‹©å¯¹åº”çš„å·¥ä½œæµ
3. ç‚¹å‡» "Run workflow" æŒ‰é’®

## æ³¨æ„äº‹é¡¹

- æ‰€æœ‰æµ‹è¯•æ­¥éª¤éƒ½è®¾ç½®äº† `continue-on-error: true`ï¼Œä¸ä¼šå› ä¸ºå•ä¸ªæµ‹è¯•å¤±è´¥è€Œä¸­æ–­æ•´ä¸ªæµç¨‹
- ä»£ç è´¨é‡æ£€æŸ¥æ˜¯å»ºè®®æ€§çš„ï¼Œä¸ä¼šé˜»æ­¢åˆå¹¶
- å¦‚æœéœ€è¦æ›´ä¸¥æ ¼çš„æ£€æŸ¥ï¼Œå¯ä»¥ç§»é™¤ `continue-on-error: true`

## è‡ªå®šä¹‰é…ç½®

### æ·»åŠ æ›´å¤šæµ‹è¯•

åœ¨ `ci.yml` çš„ `test` job ä¸­æ·»åŠ æµ‹è¯•æ­¥éª¤ï¼š

```yaml
- name: Run custom tests
  run: |
    python your_test_script.py
```

### æ·»åŠ ä»£ç è¦†ç›–ç‡

```yaml
- name: Install coverage
  run: uv pip install pytest-cov

- name: Run tests with coverage
  run: |
    pytest --cov=src --cov-report=xml
```

### æ·»åŠ å®‰å…¨æ‰«æ

å¯ä»¥æ·»åŠ  GitHub çš„ Dependabot æˆ–ä½¿ç”¨å…¶ä»–å®‰å…¨æ‰«æå·¥å…·ã€‚

